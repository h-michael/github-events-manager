query GetPullRequestEvents($owner: String, $name: String, $last: Int){
  repository(owner: $owner, name: $name) {
    id
    url
    pullRequests(last: $last) {
      edges {
        node {
          id
          number
          timeline(last: $last) {
            edges {
              node {
                ... on Commit {
                  id
                  message
                  messageBody
                  commitUrl
                  oid
                  pushedDate
                  committedDate
                }
                ... on CommitCommentThread {
                  id
                  commit {
                    oid
                  }
                }
                ... on PullRequestReview {
                  author {
                    ... on Organization {
                      name
                    }
                    ... on User {
                      name
                    }
                    ... on Bot {
                      id
                    }
                  }
                  state
                  comments(last: $last) {
                    edges {
                      node {
                        body
                      }
                    }
                  }
                  createdAt
                  updatedAt
                  lastEditedAt
                }
                ... on PullRequestReviewThread {
                  id
                  comments(last: $last) {
                    edges {
                      node {
                        id
                        bodyText
                        createdAt
                        updatedAt
                        lastEditedAt
                      }
                    }
                  }
                }
                ... on PullRequestReviewComment {
                  id
                  bodyText
                  createdAt
                  updatedAt
                  lastEditedAt
                }
                ... on IssueComment {
                  id
                  author {
                    ... on User {
                      name
                    }
                    ... on Bot {
                      id
                    }
                    ... on Organization {
                      name
                    }
                  }
                  bodyText
                  createdAt
                  updatedAt
                  lastEditedAt
                }
                ... on MergedEvent {
                  actor {
                    ... on Organization {
                      name
                    }
                    ... on User {
                      name
                    }
                    ... on Bot {
                      id
                    }
                  }
                  createdAt
                }
                ... on Node {
                  __typename
                }
              }
            }
          }
          state
          title
          bodyText
          createdAt
          updatedAt
          lastEditedAt
          closed
          closedAt
          merged
          mergedAt
        }
      }
      pageInfo {
        startCursor
        endCursor
        hasNextPage
        hasPreviousPage
      }
    }
  }
}
